# Angular Three usage inventory (dev-brand-ui angular-3d)

Scope: `apps/dev-brand-ui/src/app/core/angular-3d/**`

Scan artifact (generated by script): `tmp/angular-three-usage.json`

This is the minimal surface area we currently rely on from:

- `angular-three`
- `angular-three-soba/*`
- `angular-three-postprocessing`

Note: This repo document is intended to be an inventory + requirements reference. The actual `@hive-academy/angular-3d` implementation will live in a separate Nx workspace (per your plan), so we are not creating replacement components/services here.

## 1) `angular-three` imports used

**Core canvas / template bridge**

- `NgtCanvas` (used by `Scene3DComponent`)

**Template utilities**

- `NgtArgs` (used broadly to supply `*args` to ngt elements)

**Runtime helpers**

- `injectBeforeRender` (frame-loop hook used by multiple components/directives)
- `injectStore` (access to NgtStore: camera, renderer/gl, domElement)
- `injectLoader` (loader helper used in `PlanetComponent`)

**Catalogue / custom elements**

- `extend` (register Three.js + third-party classes for template usage)

**Other**

- `NgtSelect` (imported in `star-field.component.ts`)

## 2) `angular-three-soba/*` imports used

- `NgtsText3D` (from `angular-three-soba/abstractions`)
- `NgtsPointMaterial` (from `angular-three-soba/materials`)
- `NgtsPointsBuffer` (from `angular-three-soba/performances`)
- `injectGLTF` (from `angular-three-soba/loaders`)

## 3) `angular-three-postprocessing` imports used

- `NgtpEffectComposer`
- `NgtpBloom`
- `NgtpSMAA`

## 4) Template tags used (current)

### `ngt-*` tags

- Canvas / root: `ngt-canvas`
- Grouping: `ngt-group`
- Mesh / primitive bridge: `ngt-mesh`, `ngt-primitive`
- Controls: `ngt-orbit-controls`
- Geometries: `ngt-sphere-geometry`, `ngt-plane-geometry`, `ngt-box-geometry`, `ngt-cylinder-geometry`, `ngt-torus-geometry`,
  `ngt-icosahedron-geometry`, `ngt-octahedron-geometry`, `ngt-tetrahedron-geometry`, `ngt-dodecahedron-geometry`
- Materials: `ngt-mesh-standard-material`, `ngt-mesh-physical-material`, `ngt-mesh-lambert-material`, `ngt-sprite-material`, `ngt-shader-material`
- Sprites: `ngt-sprite`
- Lights: `ngt-ambient-light`, `ngt-directional-light`, `ngt-point-light`, `ngt-spot-light`, `ngt-hemisphere-light`
- Fog: `ngt-fog`, `ngt-fog-exp2`

### `ngts-*` tags (soba)

- `ngts-text-3d`
- `ngts-points-buffer`
- `ngts-point-material`

### `ngtp-*` tags (postprocessing)

- `ngtp-effect-composer`
- `ngtp-bloom`
- `ngtp-smaa`

## 5) Behavioral coupling to Angular Three internals (important for replacement)

### A) OrbitControls instance access via DOM element

`ScrollZoomCoordinatorDirective` attempts to locate an `OrbitControls` instance by querying the DOM for an `ngt-orbit-controls` element and then reading one of these properties:

- `__THREE__`
- `instance`
- `ref`

Any replacement should provide a supported, typed way to obtain the underlying `OrbitControls` instance (preferred), or a compatible escape hatch if we keep this pattern.

### B) `extend()` / custom elements schema

Multiple components depend on:

- calling `extend(...)` to register classes
- `CUSTOM_ELEMENTS_SCHEMA` to allow `ngt-*` / `ngts-*` / `ngtp-*` tags

A non-`angular-three` replacement should either:

1. migrate templates away from custom elements, or
2. provide its own template bridge with equivalent registration.
